 {% extends "layout.njk"  %}


{% block head %}
    <link rel="stylesheet" href="/bookmarks/create.css">
    <link rel="stylesheet" href="/main.css">
    <title>BlogDev</title>
{% endblock %}
 
 {% block content %}

    <header>
        <div class="header-container">
            <div class="links">
                <a href="/bookmarks/">⭐Meus BlogDev</a>
                 <a href="/">⭐logout</a>
            </div>
        </div>
    </header>

    <form  method="POST" action="/bookmarks/create"  enctype="multipart/form-data">

        <div class="fieldsCreateBookmark"  >
            <h2>Aqui voce pode salvar seus tech-blogs</p>
            <p> titulo : <input placeholder="eg: Name/Label Blog" type="text" name="label"></p>
            <p>link : <input placeholder="eg:http://example.com.br" type="text" name="link"></p>
            <input  id="tokenSession" name="token" type="hidden" value="{{token}}">
            <input  id="idSession" name="id" type="hidden" value="{{user.id}}">
             
        </div>

        <button class="create-button-form"  type="submit">Save ⭐</button>
    </form>



    <script>

            let firstUserTokenSession = window.document.querySelector("#tokenSession")
            let firstUserIdSession = window.document.querySelector("#idSession")

            let tokenSessionStorage = sessionStorage.getItem("token");
            let idSessionStorage = sessionStorage.getItem("id");

            function saveDataSessionStorage(){
                sessionStorage.setItem("token", `${firstUserTokenSession.value}`);
                sessionStorage.setItem("id", `${firstUserIdSession.value}`)
            }

            if(firstUserTokenSession.value || firstUserIdSession.value ){
                saveDataSessionStorage()
            }
            if(!firstUserIdSession.value || !firstUserTokenSession.value){
                firstUserTokenSession.setAttribute("value", `${tokenSessionStorage}`)
                firstUserIdSession.setAttribute("value", `${idSessionStorage}`)
                 
            }

    </script>


     {% endblock %}