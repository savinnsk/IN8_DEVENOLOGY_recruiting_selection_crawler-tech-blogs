 {% extends "layout.njk"  %}


{% block head %}

    <link rel="stylesheet" href="/main.css">
    <link rel="stylesheet" href="/bookmarks/bookmarks.css">
  
    <title>FavLinks</title>
    
{% endblock %}
 
 
 
 {% block content %}
 
 <header>
        <div class="header-container">
            <div class="links">
                 <h1>‚≠ê Hi again {{user.name}}! to <span>FavLinks !</span> </h1>
            </div>
        </div>
      
    </header>
   

    <div class="bookmarks">
       
    </div>


    <script >

        async function fetchAllBookmarksUserS(){
            const link = await fetch(`/bookmarks/list/${sessionStorage.getItem("id")}`)
            const response  = await link.json()
            const data = await response
            const bookmarks = await data
            
                bookmarks.forEach((bookmark) => { 
                let bookmarkDiv = document.querySelector('.bookmarks')
                bookmarkDiv.innerHTML +=`<form  method="POST" action="/bookmarks/delete/${bookmark.id}/${bookmark.user_id}"  enctype="multipart/form-data"><p>${bookmark.label}</p><p>${bookmark.link}</p><a href="/bookmarks/edit/${bookmark.id}" ><button type="submit">editar</button></a> <button type="submit">deletar</button></div></form>`
})          
        }

        fetchAllBookmarksUserS()

    </script>


     {% endblock %}